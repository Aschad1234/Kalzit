$cookieName = $cookie urlGetParameter ("url" objFirstProperty _request).
$rawCookieString = ($cookie objFirstProperty _request).

print: "Pushing cookie " + cookieName + " to the server".
$cookieValue = rawCookieString parseCookieValue cookieName.
$userTokenExists = false eq (void eq $userToken = rawCookieString parseCookieValue $calcitUserToken).
userTokenExists ifElse {
	(void eq cookieValue) ifElse {
		resultRef = "2" + strNewline + "No cookie named " + cookieName + " was found".
	};{
		("./nogit/users/data/" + userToken + "/cookie_" + urlEncodeParameter: cookieName + ".txt") fileWrite cookieValue.
		resultRef = "0" + strNewline + ";" strJoin parseCookieNames: rawCookieString
	}
};{
	resultRef = "1" + strNewline + "No user GUID was provided"
}