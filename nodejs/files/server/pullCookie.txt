$cookieName = $cookie urlGetParameter ("url" objFirstProperty _request).
$rawCookieString = ($cookie objFirstProperty _request).

print: "Pulling cookie " + cookieName + " from the server".
$userTokenExists = false eq (void eq $userToken = rawCookieString parseCookieValue $calcitUserToken).
userTokenExists ifElse {
	$fname = ("./nogit/users/data/" + userToken + "/cookie_" + urlEncodeParameter: cookieName + ".txt").
	$cookieValue = ((fileIsFile: fname) & fileExists: fname) if {
		fileContent: fname.
	}.
	(void eq cookieValue) ifElse {
		resultRef = "1" + strNewline + "No cookie named " + cookieName + " was found on the server"
	};{
		resultRef = "0" + strNewline + urlEncodeParameter: cookieValue
	}
};{
	resultRef = "1" + strNewline + "No user GUID was provided"
}