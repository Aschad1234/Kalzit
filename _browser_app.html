<script type="text/javascript">String.prototype.startsWith=String.prototype.startsWith||function(e){return this.lastIndexOf(e,0)===0};Array.prototype.includes=Array.prototype.includes||function(e){return this.indexOf(e)>=0};this.GLang={};GLang.categorize=function(e,t){var u=0;function a(e){for(var a=0;a<t.length;a++){var n=t[a];var r=n[1](e);if(r){return[n[0],r]}}return["_"+u++,null]}var n=[null,null];var r=[];var i=[];for(var l=0;l<e.length;l++){var o=e[l];var s=a(o);if(s[0]===n[0]){r.push(o)}else{i.push([n[0],r,n[1]]);r=[o];n=s}}if(r.length>0){i.push([n[0],r,n[1]])}return i.slice(1)};GLang.tokenize=function(e){var r=0;var t=0;return GLang.categorize(e,[["Word",function(e){return e.match("[a-zA-Z_]")}],["Digit",function(e){return e.match("\\d")}],["Space",function(e){return e.match("\\s")}]]).map(function(e){var a={textValue:e[1].join(""),category:e[0],textLocation:{row:r,column:t}};var n=a.textValue.split("\n");t=n.length>1?n[n.length-1].length:t+a.textValue.length;r+=n.length-1;return a})};(function(){function t(){return{next:function(e){switch(e.category){case"Word":return v(e);case"Digit":return g(e);case"Space":return t()}switch(e.textValue){case"}":return n("",1);case"]":return r("",1);case")":return u("",1);case"'":return l("");case'"':return i("");case"`":return o();case"´":return o()}return L([t(),a(e)])},waiting:true,kind:"waiting"}}function a(e){return{special:e,kind:"special"}}function e(t,u,i){return function a(n,r){return{next:function(e){if(e.textValue===t){if(r===1){return i(n)}r-=1}else if(e.textValue===u){r+=1}return a(e.textValue+n,r)},kind:"depthBlock"}}}var n=e("{","}",function(e){return L([t(),p(e)])});var r=e("[","]",function(e){return L([t(),{kind:"array",array:GLang.generateTree(e)}])});var u=e("(",")",function(e){return L([t(),{kind:"parentheses",parentheses:GLang.generateTree(e)}])});function i(a){return{next:function(e){if(e.textValue==='"')return L([t(),p(a)]);return i(e.textValue+a)},kind:"doubleQuoteBlock"}}function l(a){return{next:function(e){if(e.textValue==="'")return L([t(),p(a)]);return l(e.textValue+a)},kind:"singleQuoteBlock"}}function o(){return{next:function(e){if(e.textValue==="´"||e.textValue==="`")return t();return o()},kind:"commentBlock"}}function s(e){return{next:function(e){return this},error:e,kind:"error"}}function v(a){return{next:function(e){if(e.textValue==="$")return L([t(),p(a.textValue)]);return L([t(),this]).next(e)},name:a,kind:"name"}}function g(a){return{next:function(e){if(e.textValue===",")return c(a);if(e.textValue==="\\")return L([t(),h(this.num)]);return L([t(),this]).next(e)},num:parseInt(a.textValue),kind:"num"}}function c(a){return{next:function(e){if(e.category==="Digit")return L([t(),f(e,a)]);return s(e)},kind:"commaNumber"}}function f(e,a){return{next:function(e){if(e.textValue==="\\")return L([t(),h(this.num)]);return L([t(),this]).next(e)},num:parseFloat(e.textValue+"."+a.textValue),kind:"num"}}function h(e){return{kind:"num",num:-e}}function p(e){return{string:e,kind:"string"}}function L(n){return{next:function(e){var a=n[0].next(e);if(a.group){return L(a.group.concat(n.slice(1)))}return L([a].concat(n.slice(1)))},group:n,kind:"group"}}function m(e){var a=[];var n=[];for(var r=0;r<e.length;r++){if(e[r].kind==="special"&&e[r].special.textValue==="."){a.push(d(n));n=[]}else n.push(e[r])}if(n.length)a.push(d(n));var t=[];for(var r=0;r<a.length;r++){t=t.concat(a[r]);if(r<a.length-1)t.push({kind:"special",special:{textValue:"."}})}return t}function d(e){for(var a=0;a<e.length;a++){if(e[a].waiting){e.splice(a,1);a--;continue}else if(e[a].special&&e[a].special.textValue==="?"){var n=[{kind:"name",name:"calcitAnnotate"}];var r=e[a+1];var t=e[a-1];var u={kind:"parentheses",parentheses:[r,{name:{textValue:"calcitSetType"},kind:"name"},t]};e[a]=u;e.splice(a+1,1);e.splice(a-1,1);a=a-2;continue}else if(e[a].special&&e[a].special.textValue==="@"){var n=[{kind:"name",name:{textValue:"calcitSetAnnotation"}}];var r=e.splice(a+1,1);var t=d(e.splice(a+1,e.length-a-1));e=e.slice(0,a).concat(r).concat(n).concat(t);break}else if(e[a].special&&e[a].special.textValue==="#"){var n=[{kind:"name",name:{textValue:"calcitAddComment"}}];var r=e.splice(a+1,1);var t=d(e.splice(a+1,e.length-a-1));e=e.slice(0,a).concat(r).concat(n).concat(t);break}else if(e[a].special&&e[a].special.textValue==="!"){var i=false;switch(a){case e.length-2:var n=d(e.splice(a+1,1));e=e.slice(0,a).concat([{kind:"name",name:{textValue:"do"}},{kind:"name",name:{textValue:":"}}]).concat(n);i=true;break;case e.length-3:var n=d(e.splice(a+1,1));var l=d(e.splice(a+1,1));e=e.slice(0,a).concat(n).concat([{kind:"name",name:{textValue:":"}}]).concat(l);i=true;break}if(i)break;if(a>e.length-2){throw new Error("The character ! is not allowed here. It can be used as follows: !operator firstOperand secondOperand.")}var n=d(e.splice(a+1,1));var r=d(e.splice(a+1,1));var t=d(e.splice(a+1,e.length-a-1));e=e.slice(0,a).concat(r).concat(n).concat(t);break}}return e}GLang.generateTree=function(e){var a=t();var n=GLang.tokenize(e);for(var r=n.length-1;r>=0;r--){a=a.next(n[r])}a=a.group?a.group:[a];return m(a)}})();(function(e){function i(e){if(typeof e==="string"){return v(e)}return v(GLang.structuresToString(e))}function v(e){if(e===""){return""}if(e.split("_").length>1){return e.toLowerCase()}var a=e[0].toLowerCase();for(var n=1;n<e.length;n++){var r=e[n];a+=r.toLowerCase()!==r?"_"+r.toLowerCase():r}return a}e.GLang.RuntimeEnvironment=function(s){var r=[];this.innerVariables=[];this.outerEnvironment=s;this.notifyVariableChange=function(e){if(GLang.disableRuntimeUpdates)return;for(var a=0;a<r.length;a++){var n=r[a];if(n.varName===e){n.update()}}GLang.notifyGeneralChange()};this.registerVariableListener=function(e,a){r.push({varName:GLang.defaultRuntimeEnvironment.unifyStringName(e),update:a})};this.resolveName=function e(a){var n=i(a);for(var r=0;r<this.innerVariables.length;r++){var t=this.innerVariables[r];if(t.varName===n){var u=Object.create(t.varValue);GLang.setAnnotation(u,{value:[GLang.stringValue("accessVarName"),GLang.stringValue(n)]});return u}}if(this.outerEnvironment){return this.outerEnvironment.resolveName(a)}if(GLang.packageManager.installPackage(n)){return this.resolveName(a)}if(n!=="calcit_resolve_unknown"){return GLang.callObject(this.resolveName("calcit_resolve_unknown"),null,[GLang.stringValue(a)])}else{return{value:GLang.voidValue.value,varName:n}}};this.hasInnerVariable=function e(a){for(var n=0;n<this.innerVariables.length;n++){var r=this.innerVariables[n];if(r.varName===a){return true}}return false};this.setInnerVariable=function e(a,n,r,t){if(!a.match("[a-zA-Z_]+")){throw new Error(a+" is not a valid variable name!")}a=v(a);for(var u=0;u<this.innerVariables.length;u++){var i=this.innerVariables[u];if(i.varName===a){if(r&&!i.frozen){var l=i.varType?GLang.callObject(i.varType,this,[n]):n;var o=i.varValue;if(o!==l){i.varValue=l;if(o.value!==l.value){this.notifyVariableChange(a)}}return l}else{throw new Error("Not allowed to change variable $"+a+(i.frozen?" because it is frozen - probably part of a package":""))}}}var i={varName:a,varValue:t?GLang.callObject(t,this,[n],t):n,varType:t};if(!s){GLang.addAnnotation(i.varValue,{value:[GLang.stringValue("originalValueOf"),GLang.stringValue(a)]})}this.innerVariables.push(i);this.notifyVariableChange(a);return i.varValue};this.freezeInnerVariable=function e(a){a=v(a);for(var n=0;n<this.innerVariables.length;n++){var r=this.innerVariables[n];if(r.varName===a){r.frozen=true}}};this.unifyStringName=v}})(this);GLang.callObject=function(a,e,n){try{if(typeof a!=="object"){throw new Error("Error! You are probably using some v0 library or function. v1 values have to be 'normal' objects, not functions. Trying to call: "+r)}else{var r=a.value;if(typeof r==="function"){var t=r(e,n);GLang.setAnnotation(t,{value:[GLang.stringValue("producer"),a]});return t}else if(typeof r==="string"){a=GLang.functionFromString(r,a.environment||e);r=a.value}var u=new GLang.RuntimeEnvironment(r.environment);var i=GLang.getFirstAnnotation(a,GLang.stringValue("argumentList"));if(!(i&&r.code&&r.environment)){return a}i=i.value||[];for(var l=0;l<i.length;l++){var o=n.length>l?n[l]:GLang.voidValue;u.innerVariables.push({varName:GLang.defaultRuntimeEnvironment.unifyStringName(i[l].value),varValue:GLang.getType(i[l])?GLang.callObject(GLang.getType(i[l]),e,[o]):o})}if(typeof r==="object"){if(GLang.getType(a)){return GLang.callObject(GLang.getType(a),e,[GLang.evaluateTree(r.code,u)])}return GLang.evaluateTree(r.code,u)}}}catch(e){GLang.error("Tried to call:");GLang.print(a);if(a.annotations){for(var s=0;s<a.annotations.length;s++){var v=a.annotations[s];if(v.value.length===2&&v.value[0].value==="comment"){GLang.print("# "+v.value[1].value)}}}GLang.print("With parameters:");GLang.print(n);throw e}};GLang.array=function(e){if(!(e instanceof Array)){return[e]}return e};GLang.arrayValue=function(e){return{value:e}};GLang.validateAnnotation=function(e){if(!(e.value instanceof Array&&e.value.length===2)){throw new Error("An annotation needs to be an array with two values - "+e.value+" does not fit this rule")}if(!(typeof e.value[0].value==="string"))throw new Error("The first item of an annotation array has to be a string - "+e.value[0].value+" does not fit this rule")};GLang.applyFlag=function(e,a){var n=GLang.defaultRuntimeEnvironment.resolveName("flag_"+GLang.defaultRuntimeEnvironment.unifyStringName(GLang.at(0,a).value));GLang.callObject(n,GLang.defaultRuntimeEnvironment,[GLang.at(1,a),e])};GLang.addAnnotation=function(e,a){GLang.validateAnnotation(a);if(a.value[0].value==="flag"){GLang.flagQueue.unshift(function(){GLang.applyFlag(e,a.value[1])});if(!GLang.useLazyFlags)GLang.runFlagQueue();return}e.annotations=e.annotations||[];e.annotations.push(a)};GLang.setAnnotation=function(e,a){GLang.validateAnnotation(a);if(a.value[0].value==="flag"){GLang.flagQueue.unshift(function(){GLang.applyFlag(e,a.value[1])});if(!GLang.useLazyFlags)GLang.runFlagQueue();return}e.annotations=e.annotations||[];for(var n=0;n<e.annotations.length;n++){if(GLang.eq(e.annotations[n].value[0].value,a.value[0].value)){e.annotations[n]=a;return}}e.annotations.push(a)};GLang.getFirstAnnotation=function(e,a){if(!e.annotations)return undefined;for(var n=0;n<e.annotations.length;n++){if(GLang.eq(e.annotations[n].value[0].value,a.value)){return e.annotations[n].value[1]}}};GLang.getNamedAnnotations=function(e,a){if(!e.annotations)return[];var n=[];for(var r=0;r<e.annotations.length;r++){if(GLang.eq(e.annotations[r].value[0].value,a.value)){n.push(e.annotations[r].value[1])}}return n};GLang.getType=function(e){if(e.annotations){for(var a=0;a<e.annotations.length;a++){if(e.annotations[a].value[0].value==="type"){return e.annotations[a].value[1]}}}};GLang.functionFromString=function(e,a){var n={value:{environment:a,code:GLang.generateTree(e)}};GLang.addAnnotation(n,{value:[GLang.stringValue("argumentList"),{value:[{value:"x"},{value:"y"}]}]});return n};GLang.evaluateTree=function(e,a){var n=[];var r=GLang.voidValue;for(var t=0;t<e.length;t++){if(e[t].kind==="special"&&e[t].special.textValue==="."){r=GLang.evaluateSentence(n,a);n=[]}else{n.push(e[t])}}if(n.length){r=GLang.evaluateSentence(n,a)}return r};GLang.evaluateSentence=function(e,a){var n=e.length;if(n===0)return GLang.voidValue;if(0===n%2){e=e.splice(0,1).concat([{kind:"special",special:{textValue:":"}}]).concat(e);n++}if(n===1)return GLang.evaluateSentenceFragment(e[0],a);return GLang.evaluateOperation([e[0]],[e[1]],e.slice(2),a)};GLang.evaluateOperation=function(e,a,n,r){var t=GLang.evaluateTree(e,r);var u=GLang.evaluateTree(n,r);var i=GLang.evaluateTree(a,r);return GLang.callObject(i,r,[t,u])};GLang.evaluateSentenceFragment=function(e,a){switch(e.kind){case"string":var n=GLang.stringValue(e.string);n.environment=a;return n;case"num":return{value:e.num};case"name":return a.resolveName(e.name.textValue);case"parentheses":return GLang.evaluateTree(e.parentheses,a);case"array":return GLang.arrayValue([GLang.evaluateTree(e.array,a)]);case"special":return a.resolveName(e.special.textValue);case"waiting":return{value:[]};default:console.error(e)}};(function(e){GLang.defaultRuntimeEnvironment=new GLang.RuntimeEnvironment;function a(e){if(e===undefined||e===null){return GLang.voidValue}return{value:e,display:"string"}}GLang.stringValue=a;GLang.voidValue={value:[],display:"none"};function n(v){if(!v.value){v={value:v}}function g(e,a){var a=a.slice(0,a.length);var n=a.length;if(n===0){return GLang.callObject(v,e,a)}if(n>2){throw new Error("You can not call an array function with more than two parameters. (You should never call a function with more than two parameters)")}while(a.length<2){a.push({value:0})}var r=a[0];if(GLang.eq(r.value,[]))return{value:[]};var t=a.length<2?null:a[1];if(t?GLang.eq(t.value,[]):false)return{value:[]};var u=[];if(r.value instanceof Array||t.value instanceof Array){r=r.value instanceof Array?r:{value:[r]};t=t.value instanceof Array?t:{value:[t]};var i=r.value.length,l=t.value.length;var o=Math.max(i,l);for(var s=0;s<o;s++){u.push(g(e,[r.value[s%i],t.value[s%l]]))}return{value:u,display:t.display||r.display}}return GLang.callObject(v,e,[r,t])}return g}GLang.arrayFun=n;function u(e,a){var n=a.value;if(n instanceof Array&&n.length===0)return{value:[]};if(e instanceof Array){var r=[];for(var t=0;t<e.length;t++){r.push(u(e[t].value,a))}return{value:r}}if(!(n instanceof Array)){n=[{value:n}]}return n[e%n.length]}GLang.at=u;GLang.printValue=GLang.printValue||function(e){GLang.print(e.value)};GLang.eq=function e(a,n){if(a instanceof Array&&n instanceof Array){if(a.length!==n.length)return false;for(var r=0;r<a.length;r++){if(!GLang.eq(a[r].value,n[r].value))return false}return true}return a===n};GLang.defaultRuntimeEnvironment.innerVariables=[{varName:"+",varValue:{value:n(function(e,a){return{value:a[0].value+a[1].value,display:a[0].display||a[1].display}})},frozen:true},{varName:"-",varValue:{value:n(function(e,a){return{value:a[0].value-a[1].value}})},frozen:true},{varName:"%",varValue:{value:n(function(e,a){return{value:a[0].value/a[1].value}})},frozen:true},{varName:"*",varValue:{value:n(function(e,a){return{value:a[0].value*a[1].value}})},frozen:true},{varName:"/",varValue:{value:function(e,a){if(!(a[1].value instanceof Array)){a[1]={value:[a[1]]}}if(a[1].value.length===0)return{value:[]};var n=a[1].value[a[1].value.length-1];if(a[1].value.length===1)return n;for(var r=a[1].value.length-2;r>=0;r--){n=GLang.callObject(a[0],e,[a[1].value[r],n])}return n}},frozen:true},{varName:"print",varValue:{value:function(e,a){GLang.printValue(a[0]);return a[0]}},frozen:true},{varName:"array",varValue:{value:function(e,a){return{value:a}}},frozen:true},{varName:"fun",varValue:{value:function(e,a){var n=a[0];if(!(n.value instanceof Array)){n=[n]}else{n=n.value}if(n.length>2){throw new Error("Functions can not have more than two parameters")}var r=a[1].value;var t=GLang.getType(a[1]);if("string"===typeof r)r=GLang.generateTree(r);var u={value:{environment:e,code:r},display:"function"};GLang.setAnnotation(u,{value:[GLang.stringValue("argumentList"),{value:n}]});if(t){GLang.setAnnotation(u,{value:[GLang.stringValue("type"),t]})}for(var i=0;i<n.length;i++){if((n[i].value+"").startsWith("_")){return u}}var l={value:GLang.arrayFun(function(e,a){return GLang.callObject(u,e,a)}),display:"function"};GLang.setAnnotation(l,{value:[GLang.stringValue("argumentList"),{value:n}]});return l}},frozen:true},{varName:";",varValue:{value:function(e,a){var n=a[0];if(!(n.value instanceof Array)){n={value:[n]}}var r=a[1];if(!(r.value instanceof Array)){r={value:[r]}}return{value:[].concat(n.value,r.value)}}},frozen:true},{varName:"do",varValue:{value:function(e,a){var n=[];if(a.length>=2){n=a[1].value;if(!(n instanceof Array)){n=[a[1]]}}return GLang.callObject(a[0],e,n)}},frozen:true},{varName:":",varValue:{value:function(e,a){return GLang.callObject(a[0],e,[a[1]])}},frozen:true},{varName:"=",varValue:{value:function(e,a){var n=a[0].value,r=e,t=false;if(a[0].display==="reference"){n=a[0].value;r=a[0].environment;t=true}return r.setInnerVariable(n,a[1],t,GLang.getType(a[0]))}},frozen:true},{varName:"range",varValue:{value:n(function(e,a){var n=[];if(a[0].value<=a[1].value){for(var r=a[0].value;r<=a[1].value;r++){n.push({value:r})}}else{for(var r=a[0].value;r>=a[1].value;r--){n.push({value:r})}}return{value:n}})},frozen:true},{varName:"void",varValue:GLang.voidValue,frozen:true},{varName:"each",varValue:{value:function(e,a){var n=[];for(var r=0;r<a[1].value.length;r++){n.push(GLang.callObject(a[0],e,[a[1].value[r]]))}return{value:n}}},frozen:true},{varName:"eq",varValue:{value:function(e,a){return{value:GLang.eq(a[0].value,a[1].value)?1:0}}},frozen:true},{varName:"<",varValue:{value:n(function(e,a){return{value:a[0].value<a[1].value?1:0}})},frozen:true},{varName:">",varValue:{value:n(function(e,a){return{value:a[0].value>a[1].value?1:0}})},frozen:true},{varName:"^",varValue:{value:n(function(e,a){return{value:Math.pow(a[0].value,a[1].value)}})},frozen:true},{varName:"mod",varValue:{value:n(function(e,a){return{value:a[0].value%a[1].value}})},frozen:true},{varName:"|",varValue:{value:n(function(e,a){return a[0].value<a[1].value?a[1]:a[0]})},frozen:true},{varName:"&",varValue:{value:n(function(e,a){return a[0].value<a[1].value?a[0]:a[1]})},frozen:true},{varName:"at",varValue:{value:function(e,a){return u(a[0].value,a[1])}},frozen:true},{varName:"reference",varValue:{value:function(e,a){if(a[0].display==="reference"){return a[0]}return{value:a[0].value,display:"reference",environment:e,name:a[0].value}}},frozen:true},{varName:"display_type",varValue:{value:function(e,a){return GLang.stringValue(a[0].display||"default")}},frozen:true},{varName:"resolve_reference",varValue:{value:function(e,a){var n=a[0];return n.environment.resolveName(n.name)}},frozen:true}]})(this);GLang.wrapJsToValue=function u(e){if(e===null||e===undefined||e!==e)return GLang.voidValue;switch(typeof e){case"string":return GLang.stringValue(e);case"boolean":return{value:e?1:0}}if(e instanceof Function){var i=e;var a=function(e,a){var n=[];for(var r=0;r<a.length;r++){n.push(a[r].value)}var t=u(i.apply(this,n));return t};var n=i.toString().replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/)|(\s))/gm,"").match(/^function\s*[^\(]*\(\s*([^\)]*)\)/m)[1].split(/,/);var r=true;for(var t=0;t<n.length;t++){if(n[t].startsWith("_")){r=false;break}}if(r)a=GLang.arrayFun(a);return{value:a,display:"function",argumentList:n}}if(e instanceof Array){var l=[];for(var t=0;t<e.length;t++){l.push(GLang.wrapJsToValue(e[t]))}return{value:l}}if(e instanceof Object){var o=[];for(prop in e){o.push({value:[GLang.stringValue(GLang.defaultRuntimeEnvironment.unifyStringName(prop)),GLang.wrapJsToValue(e[prop])]})}return{value:o}}return{value:e}};GLang.wrapValueToJsObject=function(e){e=e.value;if(e instanceof Array){var a={};for(var n=0;n<e.length;n++){var r=GLang.at(0,e[n]).value;if("string"===typeof r){a[GLang.at(0,e[n]).value]=GLang.wrapValueToJsObject(GLang.at(1,e[n]))}else{var t=[];for(var n=0;n<e.length;n++){t[n]=GLang.wrapValueToJsObject(e[n])}return t}}return a}else{return e}};(function(global){function loadPackageSync(e){var a=e.split(".");var n=a[a.length-1];for(var r=0;r<this.supportedLanguages.length;r++){var t=this.supportedLanguages[r];if(t.langName===n){this.installedUrls.push(e);try{var u=t.langRunner(e,this.loadUrl(e));return true}catch(e){GLang.error(e);return false}}}GLang.error("Unsupported language for packages: "+n)}function register(e,a){if(e instanceof Array){for(var n=0;n<e.length;n++){this.register(e[n],a)}return}for(var r=0;r<this.registeredPackages.length;r++){var t=this.registeredPackages[r];if(t.provides===e.provides){GLang.error("The name "+t.provides+" is already provided by "+t)}}if(a){e.scriptUrl=a+e.scriptUrl}this.registeredPackages.push(e)}function freezePackageVariables(e,a){for(var n=0;n<e.length;n++){if(!GLang.defaultRuntimeEnvironment.hasInnerVariable(e[n])){throw new Error("A package has claimed to provide the variable "+e[n]+" - but it does not")}var r=GLang.defaultRuntimeEnvironment.resolveName(e[n],GLang.defaultRuntimeEnvironment);GLang.addAnnotation(r,{value:[GLang.stringValue("sourceUrl"),GLang.stringValue(a)]});GLang.defaultRuntimeEnvironment.setInnerVariable(e[n],r,true);if(!GLang.getFirstAnnotation(r,GLang.stringValue("nofreeze"))){GLang.defaultRuntimeEnvironment.freezeInnerVariable(e[n])}}}function installPackage(e){GLang.log("Looking for name "+e);for(var a=0;a<this.registeredPrecompiledPackages.length;a++){var n=this.registeredPrecompiledPackages[a];if(n[0].includes(e)){GLang.evaluateTree(n[1],GLang.defaultRuntimeEnvironment);freezePackageVariables(n[0],null);return true}}for(var a=0;a<this.registeredPackages.length;a++){var n=this.registeredPackages[a];for(var r=0;r<n.provides.length;r++){if(n.provides[r]===e){this.loadPackageSync(n.scriptUrl,n.scriptType);freezePackageVariables(n.provides,n.scriptUrl);return true}}}return false}function initialize(e){for(var a=0;a<e.length;a++){this.loadPackageSync(e[a])}}GLang.PackageManager=function(){this.loadPackageSync=loadPackageSync;this.registeredPackages=[];this.hiddenRegisteredPackages=[];this.installedUrls=[];this.register=register;this.installPackage=installPackage;this.registeredPrecompiledPackages=[];this.registerPrecompiledPackage=function(e,a){this.registeredPrecompiledPackages.push([e,a]);this.registeredPackages.push({provides:e,scriptUrl:null})};this.supportedLanguages=[{langName:"js",langRunner:function(e,a){var n={};Function(a).call(n);for(property in n){GLang.defaultRuntimeEnvironment.setInnerVariable(GLang.defaultRuntimeEnvironment.unifyStringName(property),GLang.wrapJsToValue(n[property]))}}},{langName:"z",langRunner:function(e,a){GLang.eval(a,true)}},{langName:"txt",langRunner:function(e,a){GLang.eval(a,true)}},{langName:"json",langRunner:function(url,x){var packageInfo=eval("("+x+")");if(packageInfo.requirements){for(var i=0;i<packageInfo.requirements.length;i++){if(GLang.packageManager.registeredPackages.indexOf(packageInfo.requirements[i])!==-1)continue;GLang.packageManager.loadPackageSync(packageInfo.requirements[i])}}GLang.packageManager.register(packageInfo.libraries,url.replace("/platform-packages.json","/packages/"))}},{langName:"k",langRunner:function(e,a){GLang.eval(a,true)}}];this.initialize=initialize}})(this);GLang.eval=function(e,a){if(e.startsWith("#!")){e=e.split("\n").slice(1).join("\n")}var n=a?1:0;GLang.disableRuntimeUpdates+=n;try{var r=GLang.evaluateTree(GLang.generateTree(e),GLang.defaultRuntimeEnvironment);GLang.disableRuntimeUpdates-=n;if(GLang.disableRuntimeUpdates<0){GLang.error("GLang.disableRuntimeUpdates is "+GLang.disableRuntimeUpdates)}return r}catch(e){GLang.disableRuntimeUpdates-=n;throw e}};(function(){var a=[];GLang.notifyGeneralChange=function(){if(GLang.disableRuntimeUpdates)return;for(var e=0;e<a.length;e++){a[e]()}};GLang.notifyVariableChange=GLang.defaultRuntimeEnvironment.notifyVariableChange;GLang.registerVariableListener=GLang.defaultRuntimeEnvironment.registerVariableListener;GLang.registerGeneralListener=function(e){a.push(e)};GLang.disableRuntimeUpdates=0})();GLang.listCookies=function(e){var a=[];var n=e.split(";");for(var r=0;r<n.length;r++){var t=n[r];while(t.charAt(0)==" ")t=t.substring(1,t.length);var u=t.split("=")[0];if(u!=="")a.push(u)}return a};GLang.getCookie=function(e,a){var n=encodeURIComponent(a)+"=";var r=e.split(";");for(var t=0;t<r.length;t++){var u=r[t];while(u.charAt(0)==" ")u=u.substring(1,u.length);if(u.indexOf(n)==0)return decodeURIComponent(u.substring(n.length,u.length))}return null};</script>
<script type="text/javascript">(function(global){function loadUrl(url,_headers){var xhrObj=new XMLHttpRequest;xhrObj.open("GET",url,false);if(_headers){for(var i=0;i<_headers.length;i++){xhrObj.setRequestHeader(_headers[i][0],_headers[i][1])}}xhrObj.send("");var result=xhrObj.responseText;if(xhrObj.status===200){return result}else{return null}}GLang.DOMPackageManager=function(){this.loadUrl=loadUrl;this.__proto__=new GLang.PackageManager}})(this);</script>
<script type="text/javascript">(function(){function showMessageOnPage(message,type){try{var paragraph=document.createElement("p");paragraph.innerHTML=message+"";if(message instanceof Array||message.value){try{paragraph.innerHTML=JSON.stringify(message)}catch(err){try{paragraph.innerHTML="{value:"+JSON.stringify(message.value)+"}"}catch(err){}}}switch(type){case"error":paragraph.style.color="red";break;case"print":paragraph.style.color="gray";break}document.getElementById("playground").appendChild(paragraph)}catch(e){}}GLang.error=function(error){console.error(error);showMessageOnPage(error,"error")};GLang.log=function(data){console.log(data)};GLang.print=function(data){console.warn(data);showMessageOnPage(data,"print")};GLang.stringDisplay=function(stringProducer){return function(value){var paragraph=document.createElement("p");paragraph.innerHTML=stringProducer(value);paragraph.style.width="100%";paragraph.style.display="inline-block";return paragraph}};GLang.printValue=function(container){console.log(container);document.getElementById("playground").appendChild(GLang.displayValue(container))};GLang.packageManager=new GLang.DOMPackageManager})();</script>
<script type="text/javascript">GLang.displayDefinitions=[{name:"default",value:GLang.stringDisplay(function(x){var val=x.value;if(val instanceof Array){if(val.length===0){return"()"}var string="";for(var i=0;i<val.length;i++){string+="["+GLang.displayValue(val[i]).innerHTML+"]";if(i<val.length-1){string+="; "}}return string}return JSON.stringify(val)})},{name:"string",value:GLang.stringDisplay(function(x){return x.value})},{name:"variable",value:GLang.stringDisplay(function(x){return"$"+x.value})},{name:"none",value:GLang.stringDisplay(function(x){return""})},{name:"function",value:GLang.stringDisplay(function(x){var result=x.value.codeString?"{"+x.value.codeString+"}":"{{function}. void}";if(GLang.getFirstAnnotation(x,GLang.stringValue("argumentList"))){var argumentValues=GLang.getFirstAnnotation(x,GLang.stringValue("argumentList")).value;var argList="(";for(var i=0;i<argumentValues.length;i++){argList+="$"+(argumentValues[i].value||argumentValues[i]);if(i<argumentValues.length-1){argList+="; "}}argList+=")";result=argList+" fun "+result}return result})},{name:"dom",value:function(x){return x.value}},{name:"reference",value:GLang.stringDisplay(function(x){return"reference: $"+x.value})}];GLang.flagQueue=[];setInterval(function(){if(GLang.useLazyFlags&&GLang.flagQueue.length){var len=GLang.flagQueue.length||5;for(var i=0;i<len;i++){GLang.flagQueue.pop()()}}},100);GLang.runFlagQueue=function(){if(!GLang.useLazyFlags){while(GLang.flagQueue.length){GLang.flagQueue.pop()()}}};function makeUiElement(container){var displayType=container.display||"default";for(var i=0;i<GLang.displayDefinitions.length;i++){if(GLang.displayDefinitions[i].name===displayType){return GLang.displayDefinitions[i].value(container)}}}GLang.useLazyFlags=true;GLang.displayValue=function displayValue(container){if(!GLang.useLazyFlags)return makeUiElement(container);var flags=GLang.getNamedAnnotations(container,GLang.stringValue("flag"));var placeholder=document.createElement("div");placeholder.style.display="inline-block";GLang.flagQueue.unshift(function(){var actualElement=makeUiElement(container);try{placeholder.parentElement.replaceChild(actualElement,placeholder)}catch(error){placeholder.appendChild(actualElement)}});GLang.runFlagQueue();return placeholder};</script>
<script type="text/javascript">GLang.packageManager.initialize([
"/_min.js"
]);</script>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" type="text/css" href="/assets/stylesheets/html5/_min.css" />
<body class="k-app_container">
	<div id="playground" style="width: 100%;"></div>
	<script>
		GLang.packageManager.loadPackageSync("/$app$");
	</script>
</body>