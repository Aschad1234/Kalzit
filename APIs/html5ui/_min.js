(function(thiz){var darkTheme=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;var listeners=[];(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)")).addListener(function(result){darkTheme=result.matches;if(listeners.length){stylesheetTag.href=darkTheme?darkStylesheet:lightStylesheet}for(var i=0;i<listeners.length;i++){listeners[i](darkTheme)}});thiz.prefersDarkTheme=function(){return true==darkTheme};GLang.defaultRuntimeEnvironment.setInnerVariable("onDarkThemePreferenceChange",{value:function(env,args){listeners.push(function(dark){GLang.callObject(args[0],env,[{value:dark?1:0}])});return GLang.voidValue}})})(this);this.setActiveAppName=function(id,title){history.pushState("","","/app/"+id);if(title){document.title=title}};this.uiTitle=function(title){document.title=title};GLang.defaultRuntimeEnvironment.setInnerVariable("setCssColorCombination",{value:function(env,args){var object=GLang.wrapValueToJsObject(args[0]);function colorString(color){return GLang.wrapValueToJsObject(GLang.callObject(GLang.defaultRuntimeEnvironment.resolveName("ColorString"),env,[GLang.wrapJsToValue(color)]))}document.documentElement.style.setProperty("--kv-black_accent_color",colorString(object.blackAccentColor));document.documentElement.style.setProperty("--kv-white_accent_color",colorString(object.whiteAccentColor));document.documentElement.style.setProperty("--kv-twilight_accent_color",colorString(object.twilightAccentColor));document.documentElement.style.setProperty("--kv-darker_twilight_accent_color",colorString(object.darkerTwilightAccentColor));document.documentElement.style.setProperty("--kv-lighter_twilight_accent_color",colorString(object.lighterTwilightAccentColor));document.documentElement.style.setProperty("--kv-light_accent_color",colorString(object.lightAccentColor));document.documentElement.style.setProperty("--kv-dark_accent_color",colorString(object.darkAccentColor));return GLang.voidValue}});(function(thiz){var hashes=new Map;var lastSubApp=null;function initiate(name){if(hashes.has(lastSubApp)){GLang.callObject(hashes.get(lastSubApp).close,GLang.defaultRuntimeEnvironment,[])}if(hashes.has(name)){GLang.callObject(hashes.get(name).open,GLang.defaultRuntimeEnvironment,[])}lastSubApp=name}window.onhashchange=function(){console.log(hashes);var hash=location.hash.replace("#","");initiate(hash)};thiz.openSubApp=function(name){location.hash=name};thiz.closeSubApp=function(){location.hash="#none"};thiz.registerSubApp=function(name,_openAndClose){hashes.set(name,{open:_openAndClose[0],close:_openAndClose[1]});if(location.hash=="#"+name)initiate(name)}})(this);this.uiNativeAppContainerBackgroundColor=function(_color){document.body.style.backgroundColor=_color};this.uiClearAppContainer=function(){var playground=document.getElementById("playground");while(playground.hasChildNodes()){playground.removeChild(playground.lastChild)}};GLang.defaultRuntimeEnvironment.setInnerVariable("uiButton",{value:GLang.arrayFun(function(env,args){var button=document.createElement("input");button.type="button";button.classList.add("calcitButton");button.onclick=function(){GLang.callObject(args[0],env,[])};button.value=args[1].value;return{value:button,display:"dom"}})});GLang.defaultRuntimeEnvironment.setInnerVariable("uiCheckbox",{value:GLang.arrayFun(function(env,args){var checkbox=document.createElement("input");checkbox.type="checkbox";checkbox.classList.add("calcitCheckbox");checkbox.innerText=args[1].value;checkbox.onchange=function(e){GLang.callObject(args[0],env,[{value:checkbox.checked?1:0}])};var span=document.createElement("span");span.innerText=args[1].value;var div=document.createElement("div");div.appendChild(checkbox);div.appendChild(span);return{value:div,display:"dom"}})});GLang.defaultRuntimeEnvironment.setInnerVariable("uiCheckboxVariable",{value:GLang.arrayFun(function(env,args){var checkbox=document.createElement("input");checkbox.type="checkbox";checkbox.innerText=args[1].value;checkbox.onchange=function(e){env.setInnerVariable(args[0].value,{value:checkbox.checked?1:0},true)};env.registerVariableListener(args[0].value,function(){checkbox.checked=env.resolveName(args[0].value).value!==0});var span=document.createElement("span");span.innerText=args[1].value;var div=document.createElement("div");div.appendChild(checkbox);div.appendChild(span);return{value:div,display:"dom"}})});GLang.defaultRuntimeEnvironment.setInnerVariable("uiContainer",{value:function(env,args){var div=document.createElement("div");div.classList.add("calcitContainer");var arr=args[0].value;if(!(arr instanceof Array)){arr=[args[0]]}for(var i=0;i<arr.length;i++){div.appendChild(GLang.displayValue(arr[i]))}return{value:div,display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiElementCollection",{value:function(env,args){var frag=document.createDocumentFragment();var arr=args[0].value;if(!(arr instanceof Array)){arr=[args[0]]}for(var i=0;i<arr.length;i++){frag.appendChild(GLang.displayValue(arr[i]))}return{value:frag,display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiFilePickerPathVariable",{value:function(env,args){var picker=document.createElement("input");picker.classList.add("calcitFilePicker");picker.type="file";picker.onchange=function(){GLang.defaultRuntimeEnvironment.setInnerVariable(args[0].value,GLang.stringValue(picker.value),true)};return{value:picker,display:"dom"}}});GLang.defaultRuntimeEnvironment.setInnerVariable("uiFilePickerContentTextVariable",{value:function(env,args){var picker=document.createElement("input");picker.classList.add("calcitFilePicker");picker.type="file";picker.onchange=function(event){var reader=new FileReader;reader.onload=function(event){GLang.defaultRuntimeEnvironment.setInnerVariable(args[0].value,GLang.stringValue(event.target.result),true)};reader.readAsText(event.target.files[0])};return{value:picker,display:"dom"}}});GLang.defaultRuntimeEnvironment.setInnerVariable("uiFilePickerContentUrlVariable",{value:function(env,args){var picker=document.createElement("input");picker.classList.add("calcitFilePicker");picker.type="file";picker.onchange=function(event){var reader=new FileReader;reader.onload=function(event){GLang.defaultRuntimeEnvironment.setInnerVariable(args[0].value,GLang.stringValue(event.target.result),true)};reader.readAsDataURL(event.target.files[0])};return{value:picker,display:"dom"}}});this.uiHide=function(uiElement){if(uiElement.parentNode)uiElement.parentNode.removeChild(uiElement)};GLang.defaultRuntimeEnvironment.setInnerVariable("uiHorizontalScroller",{value:function(env,args){var scroller=document.createElement("div");scroller.classList.add("calcitHorizontalScroller");scroller.classList.add("calcitDynamic_horizontalScroller");for(var i=0;i<args[0].value.length;i++){scroller.appendChild(GLang.displayValue(args[0].value[i]))}return{value:scroller,display:"dom"}}});(function(){function makeRgbaImageData(canvas,env,args){var imageData=canvas.getContext("2d").createImageData(args[0].value.length,args[0].value[0].value.length);for(var y=0;y<imageData.height;y++){for(var x=0;x<imageData.width;x++){for(var i=0;i<4;i++){imageData.data[(imageData.width*y+x)*4+i]=args[0].value[x].value[y].value[i].value}}}return imageData}function makeRgbImageData(canvas,env,args){var imageData=canvas.getContext("2d").createImageData(args[1].value.length,args[1].value[0].value.length);for(var y=0;y<imageData.height;y++){for(var x=0;x<imageData.width;x++){for(var i=0;i<4;i++){var index=(imageData.width*y+x)*4+i;if(i===3){imageData.data[index]=GLang.callObject(args[0],env,[{value:[imageData.data[index-3],imageData.data[index-2],imageData.data[index-1]]}]).value;continue}imageData.data[index]=args[1].value[x].value[y].value[i].value}}}return imageData}function makeMonoImageData(canvas,env,args){var imageData=canvas.getContext("2d").createImageData(args[1].value.length,args[1].value[0].value.length);for(var y=0;y<imageData.height;y++){for(var x=0;x<imageData.width;x++){var index=(imageData.width*y+x)*4;imageData.data[index]=imageData.data[index+1]=imageData.data[index+2]=args[1].value[x].value[y].value;imageData.data[index+3]=GLang.callObject(args[0],env,[{value:imageData.data[index]}]).value}}return imageData}function makeDataCanvas(dataMaker,env,args){var canvas=document.createElement("canvas");var imageData=dataMaker(canvas,env,args);canvas.width=imageData.width;canvas.height=imageData.height;canvas.getContext("2d").putImageData(imageData,0,0);return canvas}var windowLoaded=false;window.addEventListener("load",function(){windowLoaded=true},false);var refreshImages=true;function scrollStateChanged(){var result=refreshImages;refreshImages=false;return result}window.addEventListener("scroll",function(){refreshImages=true});window.addEventListener("resize",function(){refreshImages=true});function isScrolledIntoView(el){var rect=el.getBoundingClientRect();var elemTop=rect.top;var elemBottom=rect.bottom;isVisible=elemTop-100<window.innerHeight&&elemBottom>=-100;return isVisible}var urlViews=[];function urlView(url){var image=document.createElement("img");image.classList.add("calcitImage");if(!windowLoaded){window.addEventListener("load",function(){urlViews.push({url:url,view:image});refreshImages=true},false)}else{urlViews.push({url:url,view:image});refreshImages=true}return image}setInterval(function(){if(!scrollStateChanged())return;for(var i=0;i<urlViews.length;i++){var view=urlViews[i];var hasAttrib=view.view.hasAttribute("src");var visible=isScrolledIntoView(view.view);if(visible&&!hasAttrib){view.view.setAttribute("src",view.url)}else if(hasAttrib&&!visible){view.view.removeAttribute("src")}}},100);GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowImageUrl",{value:GLang.arrayFun(function(env,args){var image=urlView(args[0].value);return{value:image,display:"dom"}}),display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowScaledImageUrl",{value:function(env,args){var image=urlView(args[1].value);image.style.width=args[0].value[0].value+"px";image.style.height=args[0].value[1].value+"px";return{value:image,display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowScaledAndRoundedImageUrl",{value:function(env,args){var image=urlView(args[1].value);image.style.width=args[0].value[0].value+"px";image.style.height=args[0].value[1].value+"px";image.style.borderRadius=10+"px";return{value:image,display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiImageButton",{value:GLang.arrayFun(function(env,args){var image=document.createElement("img");image.src=args[1].value;image.classList.add("calcitImage");image.classList.add("k-image_button");image.onclick=function(){setTimeout(function(){GLang.callObject(args[0],env,[])},100)};return{value:image,display:"dom"}}),display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowImageDataArray",{value:function(env,args){var canvas=document.createElement("canvas");var imageData=canvas.getContext("2d").createImageData(args[0].value[0].value,args[0].value[1].value);for(var i=0;i<args[1].value.length;i++){imageData.data[i]=args[1].value[i].value}canvas.width=imageData.width;canvas.height=imageData.height;canvas.putImageData(0,0,imageData);return{value:canvas,display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowImageDataMatrix",{value:function(env,args){return{value:makeDataCanvas(makeRgbaImageData,env,args),display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowImageDataMatrixRgb",{value:function(env,args){return{value:makeDataCanvas(makeRgbImageData,env,args),display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowImageDataMatrixMono",{value:function(env,args){return{value:makeDataCanvas(makeMonoImageData,env,args),display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("imageDataUrl",{value:function(env,args){return GLang.stringValue(makeDataCanvas(makeRgbaImageData,env,args).toDataURL())},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("imageDataUrlRgb",{value:function(env,args){return GLang.stringValue(makeDataCanvas(makeRgbImageData,env,args).toDataURL())},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("imageDataUrlMono",{value:function(env,args){return GLang.stringValue(makeDataCanvas(makeMonoImageData,env,args).toDataURL())},display:"function"})})();GLang.defaultRuntimeEnvironment.setInnerVariable("uiLink",{value:GLang.arrayFun(function(env,args){var anchor=document.createElement("a");anchor.classList.add("calcitLink");anchor.appendChild(GLang.displayValue(args[1]));anchor.href=args[0].value;return{value:anchor,display:"dom"}})});GLang.defaultRuntimeEnvironment.setInnerVariable("uiPasswordOnaction",{value:GLang.arrayFun(function(env,args){var textfield=document.createElement("input");textfield.classList.add("calcitPassword");textfield.type="password";textfield.value=args[1].value;textfield.onkeyup=function(e){if(e.key==="Enter"){GLang.callObject(args[0],env,[GLang.stringValue(textfield.value)])}};return{value:textfield,display:"dom"}})});GLang.defaultRuntimeEnvironment.setInnerVariable("uiPasswordOnchange",{value:GLang.arrayFun(function(env,args){var textfield=document.createElement("input");textfield.classList.add("calcitPassword");textfield.type="password";textfield.value=args[1].value;function callback(){GLang.callObject(args[0],env,[GLang.stringValue(textfield.value)])}textfield.addEventListener("change",callback,false);textfield.addEventListener("keyup",callback,false);return{value:textfield,display:"dom"}})});GLang.defaultRuntimeEnvironment.setInnerVariable("uiPicker",{value:function(env,args){var varRef=args[0];if(varRef.display!=="reference"){throw new Error("uiPicker needs a reference as the first parameter")}var varEnv=varRef.environment;var varName=varRef.value;var picker=document.createElement("select");picker.classList.add("calcitPicker");var options=args[1].value;for(var i=0;i<options.length;i++){var option=document.createElement("option");option.innerHTML=GLang.at(0,options[i]).value;option.value=GLang.at(1,options[i]).value;picker.appendChild(option)}picker.onchange=function(){varEnv.setInnerVariable(args[0].value,GLang.stringValue(picker.value),true)};function onVariableChange(){picker.value=varEnv.resolveName(varName).value}varEnv.registerVariableListener(varName,onVariableChange);return{value:picker,display:"dom"}}});(function(global){function makeCanvas(){var canvas=document.createElement("canvas");canvas.width=document.getElementById("playground").offsetWidth||500;canvas.height=500;return canvas}function drawGraph(toPlot,canvas,color){var axes={},ctx=canvas.getContext("2d");axes.xTranslation=.5+.5*canvas.width;axes.yTranslation=.5+.5*canvas.height;axes.scale=40;showAxes(ctx,axes);funGraph(ctx,axes,toPlot,color,2)}function drawPoint(toPlot,canvas,color){var axes={},ctx=canvas.getContext("2d");axes.xTranslation=.5+.5*canvas.width;axes.yTranslation=.5+.5*canvas.height;axes.scale=40;showAxes(ctx,axes);funPoint(ctx,axes,toPlot,color)}function funGraph(ctx,axes,func,color,thick){var xx,yy,dx=4,xTranslation=axes.xTranslation,yTranslation=axes.yTranslation,scale=axes.scale;var iMax=Math.round((ctx.canvas.width-xTranslation)/dx);var iMin=Math.round(-xTranslation/dx);ctx.beginPath();ctx.lineWidth=thick;ctx.strokeStyle=color;for(var i=iMin;i<=iMax;i++){xx=dx*i;yy=scale*func(xx/scale);if(i==iMin)ctx.moveTo(xTranslation+xx,yTranslation-yy);else ctx.lineTo(xTranslation+xx,yTranslation-yy)}ctx.stroke()}function funPoint(ctx,axes,func,color){var xx,yy,dx=4,xTranslation=axes.xTranslation,yTranslation=axes.yTranslation,scale=axes.scale;var iMax=Math.round((ctx.canvas.width-xTranslation)/dx);var iMin=Math.round(-xTranslation/dx);ctx.fillStyle=color;var point=func(xx/scale);var pointX=point[0]*scale;var pointY=point[1]*scale;ctx.beginPath();ctx.arc(xTranslation+pointX,yTranslation-pointY,5,0,2*Math.PI);ctx.fill()}function showAxes(ctx,axes){var x0=axes.xTranslation,w=ctx.canvas.width;var y0=axes.yTranslation,h=ctx.canvas.height;var xmin=0;ctx.beginPath();ctx.strokeStyle="rgb(128,128,128)";ctx.moveTo(xmin,y0);ctx.lineTo(w,y0);ctx.moveTo(x0,0);ctx.lineTo(x0,h);ctx.stroke()}GLang.defaultRuntimeEnvironment.setInnerVariable("ui_plot_graph",{value:function(env,args){var canvas=makeCanvas();if(args.length===1){args.push({value:[GLang.stringValue("orange")]})}if(!(args[0].value instanceof Array)){args[0]={value:[args[0]]}}if(!(args[1].value instanceof Array)){args[1]={value:[args[1]]}}console.log(args);var functions=args[0].value;var colors=args[1].value;var len=functions.length>colors.length?functions.length:colors.length;function updatePlot(){canvas.getContext("2d").clearRect(0,0,canvas.width,canvas.height);for(var i=0;i<len;i++){drawGraph(function(x){return GLang.callObject(functions[i%functions.length],env,[{value:x}]).value},canvas,colors[i%colors.length].value)}}GLang.registerGeneralListener(updatePlot);updatePlot();return{value:canvas,display:"dom"}}});GLang.defaultRuntimeEnvironment.setInnerVariable("ui_plot_point",{value:function(env,args){var canvas=makeCanvas();if(args.length===1){args.push(GLang.stringValue("orange"))}if(!(args[0].value instanceof Array)){args[0]={value:[args[0]]}}if(!(args[1].value instanceof Array)){args[1]={value:[args[1]]}}var functions=args[0].value;var colors=args[1].value;var len=functions.length>colors.length?functions.length:colors.length;function updatePlot(){canvas.getContext("2d").clearRect(0,0,canvas.width,canvas.height);for(var i=0;i<len;i++){drawPoint(function(){var point=GLang.callObject(functions[i%functions.length],env,[]).value;return[point[0].value,point[1].value]},canvas,colors[i%colors.length].value)}}GLang.registerGeneralListener(updatePlot);updatePlot();return{value:canvas,display:"dom"}}})})(this);(function(){GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowFunction",{value:function(env,args){var div=document.createElement("div");div.appendChild(GLang.displayValue(GLang.callObject(args[0],env,[])));GLang.registerGeneralListener(function(){div.replaceChild(GLang.displayValue(GLang.callObject(args[0],env,[])),div.firstChild)});return{value:div,display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowFunctionAsList",{value:function(env,args){var div=document.createElement("div");var arr=GLang.callObject(args[0],env,[]).value;for(var i=0;i<arr.length;i++){div.appendChild(GLang.displayValue(arr[i]))}GLang.registerGeneralListener(function(){while(div.firstChild){div.removeChild(div.firstChild)}var arr=GLang.callObject(args[0],env,[]).value;for(var i=0;i<arr.length;i++){div.appendChild(GLang.displayValue(arr[i]))}});return{value:div,display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowVariable",{value:function(env,args){var varRef=args[0];if(varRef.display!=="reference"){throw new Error("uiShowVariable needs a reference as the first parameter")}var varEnv=varRef.environment;var varName=varRef.value;var div=document.createElement("div");div.appendChild(GLang.displayValue(varEnv.resolveName(varName)));varEnv.registerVariableListener(args[0].value,function(){div.replaceChild(GLang.displayValue(varEnv.resolveName(varName)),div.firstChild)});return{value:div,display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowVariableAsList",{value:function(env,args){var varRef=args[0];if(varRef.display!=="reference"){throw new Error("uiShowVariableAsList needs a reference as the first parameter")}var varEnv=varRef.environment;var varName=varRef.value;var div=document.createElement("div");var arr=varEnv.resolveName(varName).value;for(var i=0;i<arr.length;i++){div.appendChild(GLang.displayValue(arr[i]))}varEnv.registerVariableListener(varName,function(){while(div.firstChild){div.removeChild(div.firstChild)}var arr=varEnv.resolveName(varName).value;for(var i=0;i<arr.length;i++){div.appendChild(GLang.displayValue(arr[i]))}});return{value:div,display:"dom"}},display:"function"})})();(function(){GLang.defaultRuntimeEnvironment.setInnerVariable("uiNativeSlider",{value:function(env,args){var varRef=args[0];if(varRef.display!=="reference"){throw new Error("listenVariable needs a reference as the first parameter")}var varEnv=varRef.environment;var varName=varRef.value;var slider=document.createElement("input");slider.type="range";if(args.length===1){args.push({value:[{value:0},{value:100}]})}slider.min=args[1].value[0].value;slider.max=args[1].value[1].value;var initialValue=parseInt(varEnv.resolveName(varName).value);if(initialValue===initialValue){slider.value=initialValue}slider.oninput=function(){varEnv.setInnerVariable(varName,{value:Number.parseInt(slider.value)},true)};slider.oninput();GLang.registerVariableListener(args[0].value,function(){slider.value=env.resolveName(args[0].value).value});return{value:slider,display:"dom"}},display:"function"})})();GLang.defaultRuntimeEnvironment.setInnerVariable("uiHorizontalPxSpace",{value:function(env,args){var div=document.createElement("div");div.style.display="inline-block";div.style.width=args[0].value+"px";return{value:div,display:"dom"}}});GLang.defaultRuntimeEnvironment.setInnerVariable("uiHorizontalPercentSpace",{value:function(env,args){var div=document.createElement("div");div.style.display="inline-block";div.style.width=args[0].value+"%";return{value:div,display:"dom"}}});GLang.defaultRuntimeEnvironment.setInnerVariable("uiVerticalPxSpace",{value:function(env,args){var div=document.createElement("div");div.style.display="block";div.style.height=args[0].value+"px";return{value:div,display:"dom"}}});GLang.defaultRuntimeEnvironment.setInnerVariable("uiVerticalPercentSpace",{value:function(env,args){var div=document.createElement("div");div.style.display="block";div.style.height=args[0].value+"%";return{value:div,display:"dom"}}});GLang.defaultRuntimeEnvironment.setInnerVariable("uiStack",{value:function(env,args){var div=document.createElement("div");var arr=args[0].value;if(!(arr instanceof Array)){arr=[args[0]]}function createLayer(value){var layer=document.createElement("div");layer.appendChild(GLang.displayValue(value));layer.style.width="100%";layer.style.height="100%";layer.style.position="absolute";layer.style.top=0;layer.style.left=0;return layer}for(var i=0;i<arr.length;i++){div.appendChild(createLayer(arr[i]))}div.style.display="inline-block";div.style.position="relative";return{value:div,display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiText",{value:function(env,args){return{value:GLang.displayValue(GLang.stringValue(args[0].value+"")),display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiNativeTextareaVariableOnchange",{value:GLang.arrayFun(function(env,args){var textfield=document.createElement("textarea");textfield.value=GLang.eval(args[0].value).value;textfield.onkeyup=function(e){GLang.defaultRuntimeEnvironment.setInnerVariable(args[0].value,GLang.stringValue(textfield.value),true)};GLang.registerVariableListener(args[0].value,function(){textfield.value=GLang.eval(args[0].value).value});return{value:textfield,display:"dom"}})});GLang.defaultRuntimeEnvironment.setInnerVariable("uiNativeTextareaOnchange",{value:GLang.arrayFun(function(env,args){var textfield=document.createElement("textarea");textfield.value=args[1].value;function callback(){GLang.callObject(args[0],env,[GLang.stringValue(textfield.value)])}textfield.addEventListener("change",callback,false);textfield.addEventListener("keyup",callback,false);return{value:textfield,display:"dom"}})});GLang.defaultRuntimeEnvironment.setInnerVariable("uiTextfieldOnaction",{value:GLang.arrayFun(function(env,args){var textfield=document.createElement("input");textfield.type="text";textfield.value=args[1].value;textfield.onkeyup=function(e){if(e.key==="Enter"){GLang.callObject(args[0],env,[GLang.stringValue(textfield.value)])}};return{value:textfield,display:"dom"}})});GLang.defaultRuntimeEnvironment.setInnerVariable("uiTextfieldOnchange",{value:GLang.arrayFun(function(env,args){var textfield=document.createElement("input");textfield.type="text";textfield.value=args[1].value;function callback(){GLang.callObject(args[0],env,[GLang.stringValue(textfield.value)])}textfield.addEventListener("change",callback,false);textfield.addEventListener("keyup",callback,false);return{value:textfield,display:"dom"}})});(function(global){global.colorToString=function(_color){return"rgba("+_color[0].value+", "+_color[1].value+", "+_color[2].value+", "+_color[3].value/255+")"};function resetBackground(object){object.style.backgroundColor=object.style.backgroundImage=null}global.flagBackgroundColor=function(_color,object){resetBackground(object);object.style.backgroundColor=_color};global.flagForegroundColor=function(_color,object){object.style.color=_color};global.flagBackgroundGradientLeftToRight=function(_colors,object){resetBackground(object);object.style.backgroundImage="linear-gradient(to right, "+_colors[0].value+", "+_colors[1].value+")"};global.flagBackgroundGradientTopToBottom=function(_colors,object){resetBackground(object);object.style.backgroundImage="linear-gradient(to bottom, "+_colors[0].value+", "+_colors[1].value+")"};global.flagOpacity=function(opacity,object){object.style.opacity=opacity}})(this);this.flagColumns=function(columnCount,object){if(columnCount<0){object.classList.add("calcitDynamic_columns")}else{object.style.columnCount=columnCount}};this.flagCssClass=function(clss,_view){_view.classList.add(clss)};this.flagFit=function(unused,object){object.style.width="100%";object.style.height="100%";object.style.objectFit="contain"};this.flagFontFamily=function(familyName,object){if(familyName===-1){object.classList.add("calcitDynamic_fontFamily")}else{object.style.fontFamily=familyName}};this.flagEmFontSize=function(size,object){object.style.fontSize=size+"em"};this.flagPxFontSize=function(size,object){object.style.fontSize=size+"px"};this.flagItalic=function(unused,object){object.style.fontStyle="italic"};this.flagOnHover=function(listener,object){object.onmouseover=function(){GLang.callObject({value:listener},GLang.defaultRuntimeEnvironment,[])}};this.flagOnTap=function(listener,object){object.onclick=function(){GLang.callObject({value:listener},GLang.defaultRuntimeEnvironment,[])}};this.flagOnPointerDown=function(listener,object){object.onmousedown=function(e){GLang.callObject({value:listener},GLang.defaultRuntimeEnvironment,[{value:e.clientX},{value:e.clientY}])}};this.flagOnPointerUp=function(listener,object){object.onmouseup=function(e){GLang.callObject({value:listener},GLang.defaultRuntimeEnvironment,[{value:e.clientX},{value:e.clientY}])}};this.flagOnPointerMove=function(listener,object){object.onmousemove=function(e){GLang.callObject({value:listener},GLang.defaultRuntimeEnvironment,[{value:e.clientX},{value:e.clientY}])}};this.flagOnTextSelect=function flagOnTextSelect(listener,object){var lastStart,lastEnd;function triggerListener(startPos,endPos){if(startPos!==lastStart||endPos!==lastEnd){lastStart=startPos;lastEnd=endPos;GLang.callObject({value:listener},GLang.defaultRuntimeEnvironment,[GLang.stringValue(object.value.substring(startPos,endPos))])}}function markerListener(){if(object.selectionStart!==undefined){var startPos=object.selectionStart;var endPos=object.selectionEnd;if(startPos!==endPos){triggerListener(startPos,endPos)}}setTimeout(markerListener,750)}markerListener()};this.flagBottom=function(uselessArg,object){object.style.position="absolute";object.style.bottom="0"};this.flagTop=function(uselessArg,object){object.style.position="absolute";object.style.top="0"};this.flagLeft=function(uselessArg,object){object.style.position="absolute";object.style.left="0"};this.flagRight=function(uselessArg,object){object.style.position="absolute";object.style.right="0"};this.flagCenter=function(uselessArg,object){object.style.display="block";object.style.margin="0 auto"};this.flagHorizontalCenter=function(uselessArg,object){object.style.display="inline-block";object.style.left="50%";object.style.transform="translateX(-50%)"};this.flagVerticalCenter=function(uselessArg,object){object.style.display="inline-block";object.style.top="50%";object.style.transform="translateY(-50%)"};this.flagWindowBottom=function(uselessArg,object){object.style.position="fixed";object.style.bottom="0"};this.flagWindowTop=function(uselessArg,object){object.style.position="fixed";object.style.top="0"};this.flagWindowLeft=function(uselessArg,object){object.style.position="fixed";object.style.left="0"};this.flagWindowRight=function(uselessArg,object){object.style.position="fixed";object.style.right="0"};this.flagWindowCenter=function(uselessArg,object){object.style.display="block";object.style.position="fixed";object.style.left="50%";object.style.top="50%";object.style.transform="translate(-50%, -50%)"};this.flagFront=function(uselessArg,object){object.style.zIndex="1"};this.flagPercentRoundness=function(roundness,object){if(roundness<0){object.classList.add("calcitDynamic_roundness")}else{object.style.borderRadius=roundness/2+"%"}};this.flagPxRoundness=function(roundness,object){if(roundness<0){object.classList.add("calcitDynamic_roundness")}else{object.style.borderRadius=roundness+"px"}};this.flagVerticalScroller=function(width,object){object.style.overflowY="auto"};this.flagBoxShadow=function(_color,view){view.style.boxShadow="0px 0px 15px "+_color};this.flagCenterText=function(_useless,object){object.style.textAlign="center"};this.flagWidth=function(width,object){object.style.width="calc("+width+")"};this.flagPxWidth=function(width,object){object.style.width=width+"px"};this.flagPxHeight=function(height,object){object.style.height=height+"px"};this.flagPercentWidth=function(width,object){object.style.width=width+"%"};this.flagHeight=function(height,object){object.style.height="calc("+height+")"};this.flagPercentHeight=function(height,object){object.style.height=height+"%"};this.flagEmWidth=function(width,object){object.style.width=width+"em"};this.flagEmHeight=function(height,object){object.style.height=height+"em"};this.flagMmWidth=function(width,object){object.style.width=width+"mm"};this.flagMmHeight=function(height,object){object.style.height=height+"mm"};this.flagCmWidth=function(width,object){object.style.width=width+"cm"};this.flagCmHeight=function(height,object){object.style.height=height+"cm"};this.flagInchWidth=function(width,object){object.style.width=width+"in"};this.flagInchHeight=function(height,object){object.style.height=height+"in"};