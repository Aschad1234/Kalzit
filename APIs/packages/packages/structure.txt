@(deprecated: "This function is very unintuitive to use (for example, it uses set- and get- functions and forces you to use property names with underscores). You should probably use 'modifiableObject' or 'modifiableList' instead, or just create your own data structure yourself.")
$structure = ($_fields ? (List:String)) fun {
	;/ {
		$name = calcitUnifyName: x.
		$currentState = ().
		$currentStateRef = reference: $currentState.
		
		$listener = (). $listenerRef = reference: $listener.
		
		[("get_" + name); () fun {currentState}];
		[("set_" + name); ($_value) fun {currentStateRef = _value. do:listener. currentState}];
		[("set_on_change_of_" + name); ($listener) fun {listenerRef = listener}]
	} each _fields
}.

@(deprecated: "This function is very unintuitive to use (for example, it uses set- and get- functions and forces you to use property names with underscores). You should probably use 'modifiableObject' or 'modifiableList' instead, or just create your own data structure yourself.")
$structureFun = ($_fields ? (List:String)) fun {
	() fun {structure: _fields}
}.