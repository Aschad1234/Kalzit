(function(){function loadImageAndThen(imageUrl,andThen){var image=document.createElement("img");image.onload=function(){var width=image.width;var height=image.height;var canvas=document.createElement("canvas");canvas.width=width;canvas.height=height;canvas.getContext("2d").drawImage(image,0,0,image.width,image.height);var pixels=canvas.getContext("2d").getImageData(0,0,width,height).data;andThen(pixels,width,height)};image.src="server/serverside_load.php?query="+encodeURIComponent(imageUrl)}GLang.defaultRuntimeEnvironment.setInnerVariable("loadImageAsync",{value:function(env,args){loadImageAndThen(args[1].value,function(pixels,width,height){var result=[];for(var x=0;x<width;x++){result.push({value:[]});for(var y=0;y<height;y++){var start=(y*width+x)*4;result[x].value.push({value:[{value:pixels[start]},{value:pixels[start+1]},{value:pixels[start+2]},{value:pixels[start+3]}]})}}GLang.callObject(args[0],env,[{value:result}])});return{value:0,display:"none"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("loadImageAsyncRgb",{value:function(env,args){loadImageAndThen(args[1].value,function(pixels,width,height){var result=[];for(var x=0;x<width;x++){result.push({value:[]});for(var y=0;y<height;y++){var start=(y*width+x)*4;result[x].value.push({value:[{value:pixels[start]},{value:pixels[start+1]},{value:pixels[start+2]}]})}}GLang.callObject(args[0],env,[{value:result}])});return{value:0,display:"none"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("loadImageAsyncMono",{value:function(env,args){loadImageAndThen(args[1].value,function(pixels,width,height){var result=[];for(var x=0;x<width;x++){result.push({value:[]});for(var y=0;y<height;y++){var start=(y*width+x)*4;result[x].value.push({value:(pixels[start]+pixels[start+1]+pixels[start+2])/3})}}GLang.callObject(args[0],env,[{value:result}])});return{value:0,display:"none"}},display:"function"})})();(function(thiz){function getVoiceObject(voiceName){for(var i=0;i<speechSynthesis.getVoices().length;i++){if(speechSynthesis.getVoices()[i].name===voiceName){return speechSynthesis.getVoices()[i]}}}thiz.speechSay=function(text,voice){var ssu=new SpeechSynthesisUtterance(text);ssu.voice=getVoiceObject(voice)||ssu.voice;speechSynthesis.speak(ssu);return text};thiz.speechGetVoicesByLanguage=function(language){var list=[];for(var i=0;i<speechSynthesis.getVoices().length;i++){if(speechSynthesis.getVoices()[i].lang.startsWith(language)){list.push(speechSynthesis.getVoices()[i].name)}}return list};thiz.speechGetVoices=function(){var list=[];for(var i=0;i<speechSynthesis.getVoices().length;i++){list.push(speechSynthesis.getVoices()[i].name)}return list}})(this);(function(){var queue=[];var apiLoaded=false;var apiBooted=false;function runWithTwitchApi(fun){try{if(apiLoaded){fun()}else{queue.push(fun);if(!apiBooted){var scriptTag=document.createElement("script");scriptTag.src="https://player.twitch.tv/js/embed/v1.js";scriptTag.onload=function(){apiLoaded=true;while(queue.length)queue.pop()()};document.head.appendChild(scriptTag);apiBooted=true}}}catch(e){console.error("Dang, this might be why the twitch player does not work:");console.error(e)}}function uiTwitchChannelPlayer(channel,playerCallback){var player=document.createElement("div");runWithTwitchApi(function(){playerCallback(new Twitch.Player(player,{channel:channel,width:"100%",height:"100%"}))});return{display:"dom",value:player}}function uiTwitchVideoPlayer(video,playerCallback){var player=document.createElement("div");runWithTwitchApi(function(){playerCallback(new Twitch.Player(player,{video:video,width:"100%",height:"100%"}))});return{display:"dom",value:player}}function uiTwitchCollectionPlayer(collection,playerCallback){var player=document.createElement("div");runWithTwitchApi(function(){playerCallback(new Twitch.Player(player,{collection:collection,width:"100%",height:"100%"}))});return{display:"dom",value:player}}function playerValue(player){var onEnd=function(){};player.addEventListener(Twitch.Player.ENDED,function(state){onEnd()});var onProgress=function(time){};var lastTime=null;setInterval(function(){var newTime=player.getCurrentTime();if(lastTime!==newTime){onProgress(lastTime=newTime)}},100);var controller={value:[{value:[{value:"play"},{value:function(env,args){player.play();return GLang.voidValue},display:"function"}]},{value:[{value:"pause"},{value:function(env,args){player.pause();return GLang.voidValue},display:"function"}]},{value:[{value:"getDuration"},{value:function(env,args){return{value:player.getDuration()}},display:"function"}]},{value:[{value:"setTime"},{value:function(env,args){player.seek(parseInt(args[0].value+""));return GLang.voidValue},display:"function"}]},{value:[{value:"setVolume"},{value:function(env,args){player.setVolume(parseFloat(args[0].value+""));return GLang.voidValue},display:"function"}]},{value:[{value:"getVolume"},{value:function(env,args){return{value:player.getVolume()}},display:"function"}]},{value:[{value:"setOnEnd"},{value:function(env,args){onEnd=function(){GLang.callObject(args[0],env,[controller])};return GLang.voidValue},display:"function"}]},{value:[{value:"getProgress"},{value:function(env,args){return{value:player.getCurrentTime()}},display:"function"}]},{value:[{value:"setOnProgress"},{value:function(env,args){onProgress=function(time){GLang.callObject(args[0],env,[{value:time},controller])};return GLang.voidValue},display:"function"}]}]};return controller}GLang.defaultRuntimeEnvironment.setInnerVariable("uiTwitchChannelPlayer",{value:function(env,args){return uiTwitchChannelPlayer(args[0].value,function(player){GLang.callObject(args.length>=2?args[1]:{value:""},env,[playerValue(player)])})}});GLang.defaultRuntimeEnvironment.setInnerVariable("uiTwitchVideoPlayer",{value:function(env,args){return uiTwitchVideoPlayer(args[0].value,function(player){GLang.callObject(args.length>=2?args[1]:{value:""},env,[playerValue(player)])})}});GLang.defaultRuntimeEnvironment.setInnerVariable("uiTwitchCollectionPlayer",{value:function(env,args){return uiTwitchCollectionPlayer(args[0].value,function(player){GLang.callObject(args.length>=2?args[1]:{value:""},env,[playerValue(player)])})}})})();(function(global){function makePlayerInterface(mediaElement){var onEnd=function(){};var onProgress=function(time){};mediaElement.addEventListener("ended",function myHandler(e){onEnd()},false);mediaElement.addEventListener("timeupdate",function myHandler(e){onProgress(mediaElement.currentTime)},false);var controller={value:[{value:[{value:"play"},{value:function(env,args){mediaElement.play();return GLang.voidValue},display:"function"}]},{value:[{value:"pause"},{value:function(env,args){mediaElement.pause();return GLang.voidValue},display:"function"}]},{value:[{value:"setVolume"},{value:function(env,args){mediaElement.volume=parseFloat(args[0].value+"");return GLang.voidValue},display:"function"}]},{value:[{value:"getVolume"},{value:function(env,args){return{value:mediaElement.volume}},display:"function"}]},{value:[{value:"getDuration"},{value:function(env,args){return{value:mediaElement.duration}},display:"function"}]},{value:[{value:"setTime"},{value:function(env,args){mediaElement.currentTime=parseFloat(args[0].value+"");return GLang.voidValue},display:"function"}]},{value:[{value:"setOnEnd"},{value:function(env,args){onEnd=function(){GLang.callObject(args[0],env,[controller])};return GLang.voidValue},display:"function"}]},{value:[{value:"getProgress"},{value:function(env,args){return{value:mediaElement.currentTime}},display:"function"}]},{value:[{value:"setOnProgress"},{value:function(env,args){onProgress=function(time){GLang.callObject(args[0],env,[{value:time},controller])};return GLang.voidValue},display:"function"}]}]};return controller}GLang.defaultRuntimeEnvironment.setInnerVariable("uiAudioPlayer",{value:function(env,args){var audio=document.createElement("audio");audio.classList.add("calcitAudioPlayer");audio.src=args[0].value;audio.controls="controls";GLang.callObject(args.length>=2?args[1]:GLang.stringValue(""),env,[makePlayerInterface(audio)]);return{value:audio,display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiVideoPlayer",{value:function(env,args){var video=document.createElement("video");video.classList.add("calcitAudioPlayer");video.src=args[0].value;video.controls="controls";GLang.callObject(args.length>=2?args[1]:GLang.stringValue(""),env,[makePlayerInterface(video)]);return{value:video,display:"dom"}},display:"function"})})(this);GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowImageDataChannelsRgb",{value:function(env,args){var canvas=document.createElement("canvas");var channels=args[1].value;var redChannel=channels[0].value;var greenChannel=channels[1].value;var blueChannel=channels[2].value;var width,height;if(redChannel instanceof Array){width=redChannel.length;height=redChannel[0].value.length}else if(greenChannel instanceof Array){width=greenChannel.length;height=greenChannel[0].value.length}else if(blueChannel instanceof Array){width=blueChannel.length;height=blueChannel[0].value.length}var imageData=canvas.getContext("2d").createImageData(width,height);for(var y=0;y<imageData.height;y++){for(var x=0;x<imageData.width;x++){for(var i=0;i<4;i++){var index=(imageData.width*y+x)*4+i;switch(i){case 0:imageData.data[index]=GLang.at(y,GLang.at(x,redChannel)).value;break;case 1:imageData.data[index]=GLang.at(y,GLang.at(x,greenChannel)).value;break;case 2:imageData.data[index]=GLang.at(y,GLang.at(x,blueChannel)).value;break;case 3:imageData.data[index]=GLang.callObject(args[0],env,[{value:[imageData.data[index-3],imageData.data[index-2],imageData.data[index-1]]}]).value}}}}canvas.width=imageData.width;canvas.height=imageData.height;canvas.getContext("2d").putImageData(imageData,0,0);return{value:canvas,display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowImageDataChannels",{value:function(env,args){var canvas=document.createElement("canvas");var channels=args[0].value;var redChannel=channels[0].value;var greenChannel=channels[1].value;var blueChannel=channels[2].value;var alphaChannel=channels[3].value;var width,height;if(redChannel instanceof Array){width=redChannel.length;height=redChannel[0].value.length}else if(greenChannel instanceof Array){width=greenChannel.length;height=greenChannel[0].value.length}else if(blueChannel instanceof Array){width=blueChannel.length;height=blueChannel[0].value.length}else if(alphaChannel instanceof Array){width=alphaChannel.length;height=alphaChannel[0].value.length}var imageData=canvas.getContext("2d").createImageData(width,height);for(var y=0;y<imageData.height;y++){for(var x=0;x<imageData.width;x++){for(var i=0;i<4;i++){var index=(imageData.width*y+x)*4+i;switch(i){case 0:imageData.data[index]=GLang.at(y,GLang.at(x,redChannel)).value;break;case 1:imageData.data[index]=GLang.at(y,GLang.at(x,greenChannel)).value;break;case 2:imageData.data[index]=GLang.at(y,GLang.at(x,blueChannel)).value;break;case 3:imageData.data[index]=GLang.at(y,GLang.at(x,alphaChannel)).value;break}}}}canvas.width=imageData.width;canvas.height=imageData.height;canvas.getContext("2d").putImageData(imageData,0,0);return{value:canvas,display:"dom"}},display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowSvgPath",{value:GLang.arrayFun(function(env,args){var dimsAndPath=args[0].value.split("\n");var dims=dimsAndPath[0];var path=dimsAndPath[1];var svgTag=document.createElement("svg");var pathTag=document.createElement("path");pathTag.setAttribute("d",path);if(dims){pathTag.setAttribute("viewBox",dims)}svgTag.appendChild(pathTag);return{value:svgTag,display:"dom"}}),display:"function"});GLang.defaultRuntimeEnvironment.setInnerVariable("uiShowWebpageUrl",{value:GLang.arrayFun(function(env,args){var iframe=document.createElement("iframe");iframe.src=args[0].value;return{value:iframe,display:"dom"}})});(function(){var queue=[];var apiLoaded=false;var apiBooted=true;function runWithVimeoApi(fun){try{if(apiLoaded){fun()}else{queue.push(fun);if(!apiBooted){var scriptTag=document.createElement("script");scriptTag.src="https://player.vimeo.com/api/player.js";scriptTag.onload=function(){apiLoaded=true;while(queue.length)queue.pop()()};document.head.appendChild(scriptTag);apiBooted=true}}}catch(e){console.error(e)}}function uiVimeoPlayer(video,playerCallback){var frame=document.createElement("iframe");frame.src="https://player.vimeo.com/video/"+video;frame.setAttribute("frameborder",0);runWithVimeoApi(function(){playerCallback(new Vimeo.Player(frame))});return{display:"dom",value:frame}}function playerValue(player){var onEnd=function(){};player.on("ended",function(data){onEnd()});var onProgress=function(time){};var lastTime=null;setInterval(function(){var newTime=player.getCurrentTime();if(lastTime!==newTime){onProgress(lastTime=newTime)}},100);var controller={value:[{value:[{value:"play"},{value:function(env,args){player.play();return GLang.voidValue},display:"function"}]},{value:[{value:"pause"},{value:function(env,args){player.pause();return GLang.voidValue},display:"function"}]},{value:[{value:"getDuration"},{value:function(env,args){return{value:player.getDuration()}},display:"function"}]},{value:[{value:"setTime"},{value:function(env,args){player.seek(parseInt(args[0].value+""));return GLang.voidValue},display:"function"}]},{value:[{value:"setVolume"},{value:function(env,args){player.setVolume(parseFloat(args[0].value+""));return GLang.voidValue},display:"function"}]},{value:[{value:"getVolume"},{value:function(env,args){return{value:player.getVolume()}},display:"function"}]},{value:[{value:"setOnEnd"},{value:function(env,args){onEnd=function(){GLang.callObject(args[0],env,[controller])};return GLang.voidValue},display:"function"}]},{value:[{value:"getProgress"},{value:function(env,args){return{value:player.getCurrentTime()}},display:"function"}]},{value:[{value:"setOnProgress"},{value:function(env,args){onProgress=function(time){GLang.callObject(args[0],env,[{value:time},controller])};return GLang.voidValue},display:"function"}]}]};return controller}GLang.defaultRuntimeEnvironment.setInnerVariable("uiVimeoPlayer",{value:function(env,args){return uiVimeoPlayer(args[0].value,function(player){GLang.callObject(args.length>=2?args[1]:{value:""},env,[playerValue(player)])})}})})();(function(){var queue=[];var apiLoaded=false;var apiBooted=false;window.onYouTubePlayerAPIReady=function(){apiLoaded=true;while(queue.length){queue.pop()()}};function runWithYtApi(fun){if(apiLoaded){fun()}else{queue.push(fun);if(!apiBooted){var tag=document.createElement("script");tag.src="https://www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);apiBooted=true}}}function uiYoutubePlayer(id,playerCallback){var player=document.createElement("div");runWithYtApi(function(){playerCallback(new YT.Player(player,{videoId:id}))});return{display:"dom",value:player}}function playerValue(player){var onEnd=function(){};player.addEventListener("onStateChange",function(state){switch(state.data){case YT.PlayerState.ENDED:onEnd();break}});var onProgress=function(time){};var lastTime=null;setInterval(function(){var newTime=player.getCurrentTime();if(lastTime!==newTime){onProgress(lastTime=newTime)}},100);var controller={value:[{value:[{value:"play"},{value:function(env,args){player.playVideo();return GLang.voidValue},display:"function"}]},{value:[{value:"pause"},{value:function(env,args){player.pauseVideo();return GLang.voidValue},display:"function"}]},{value:[{value:"getDuration"},{value:function(env,args){return{value:player.getDuration()}},display:"function"}]},{value:[{value:"setTime"},{value:function(env,args){player.seekTo(parseInt(args[0].value+""));return GLang.voidValue},display:"function"}]},{value:[{value:"setVolume"},{value:function(env,args){player.setVolume(parseFloat(args[0].value+"")*100);return GLang.voidValue},display:"function"}]},{value:[{value:"getVolume"},{value:function(env,args){return{value:player.getVolume()/100}},display:"function"}]},{value:[{value:"setOnEnd"},{value:function(env,args){onEnd=function(){GLang.callObject(args[0],env,[controller])};return GLang.voidValue},display:"function"}]},{value:[{value:"getProgress"},{value:function(env,args){return{value:player.getCurrentTime()}},display:"function"}]},{value:[{value:"setOnProgress"},{value:function(env,args){onProgress=function(time){GLang.callObject(args[0],env,[{value:time},controller])};return GLang.voidValue},display:"function"}]}]};return controller}GLang.defaultRuntimeEnvironment.setInnerVariable("uiNativeYoutubePlayer",{value:function(env,args){return uiYoutubePlayer(args[0].value,function(player){console.log(player);GLang.callObject(args.length>=2?args[1]:{value:""},env,[playerValue(player)])})}})})();GLang.packageManager.registerPrecompiledPackage(["animation"],[{string:"animation",kind:"string"},{special:"=",kind:"special"},{kind:"parentheses",parentheses:[{name:"Float",kind:"name"},{name:"calcitSetType",kind:"name"},{string:"duration",kind:"string"}]},{name:"fun",kind:"name"},{kind:"parentheses",parentheses:[{name:"MediaController",kind:"name"},{name:"calcitSetType",kind:"name"},{string:"\n\t$progress = 0. $progressRef = reference: $progress.\n\t$onEnd = void. $onEndRef = reference: $onEnd.\n\t$onProgress = void. $onProgressRef = reference: $onProgress.\n\t$ended = false. $endedRef = reference: $ended.\n\t\n\t$lastInterrupt = \\1. $lastInterruptRef = reference: $lastInterrupt.\n\t$looper = void. $looperRef = reference: $looper.\n\t\n\t$looped = () fun {\n\t\t$time = do:getCurrentDate.\n\t\tonProgress:progressRef = progress + time - lastInterrupt.\n\t\tlastInterruptRef = time.\n\t\t!ifElse (progress > duration) {\n\t\t\tpause object.\n\t\t\tendedRef = true.\n\t\t\tonProgress:duration.\n\t\t\tdo:onEnd.\n\t\t};{}\n\t}.\n\t\n\t$object = [$getDuration;duration];\n\t[$getProgress;() fun {progress}];\n\t[$setTime;($time) fun {onProgress: progressRef = time}];\n\t[$setOnEnd;($callback) fun {onEndRef = callback}];\n\t[$setOnProgress;($callback) fun {onProgressRef = callback}];\n\t[$play;() fun {\n\t\t`Play the animation`\n\t\t!if ended {\n\t\t\tendedRef = false.\n\t\t\tprogressRef = 0.\n\t\t\tonProgress:0.\n\t\t}.\n\t\t!if (looper eq void) {\n\t\t\tlastInterruptRef = do:getCurrentDate.\n\t\t\tlooperRef = 32 repeatAsync looped\n\t\t}.\n\t}];\n\t[$pause;() fun {\n\t\t`Pause the animation`\n\t\tdo:$exit of looper.\n\t\tlooperRef = void.\n\t}]\n",kind:"string"}]}]);GLang.packageManager.registerPrecompiledPackage(["image_get_channel","image_get_red_channel","image_get_green_channel","image_get_blue_channel"],[{string:"imageGetChannel",kind:"string"},{special:"=",kind:"special"},{kind:"parentheses",parentheses:[{string:"index",kind:"string"},{special:";",kind:"special"},{string:"_imageData",kind:"string"}]},{name:"fun",kind:"name"},{string:"{{index at x} each x} each _imageData",kind:"string"},{kind:"dot",dot:1},{string:"imageGetRedChannel",kind:"string"},{special:"=",kind:"special"},{string:"_x",kind:"string"},{name:"fun",kind:"name"},{string:"0 imageGetChannel _x",kind:"string"},{kind:"dot",dot:1},{string:"imageGetGreenChannel",kind:"string"},{special:"=",kind:"special"},{string:"_x",kind:"string"},{name:"fun",kind:"name"},{string:"1 imageGetChannel _x",kind:"string"},{kind:"dot",dot:1},{string:"imageGetBlueChannel",kind:"string"},{special:"=",kind:"special"},{string:"_x",kind:"string"},{name:"fun",kind:"name"},{string:"2 imageGetChannel _x",kind:"string"}]);GLang.packageManager.registerPrecompiledPackage(["color_remove_alpha","color_set_alpha","image_remove_alpha","image_set_alpha"],[{string:"colorRemoveAlpha",kind:"string"},{special:"=",kind:"special"},{string:"_x",kind:"string"},{name:"fun",kind:"name"},{string:"(0 range 2) at _x",kind:"string"},{kind:"dot",dot:1},{string:"colorSetAlpha",kind:"string"},{special:"=",kind:"special"},{kind:"parentheses",parentheses:[{string:"x",kind:"string"},{special:";",kind:"special"},{string:"_y",kind:"string"}]},{name:"fun",kind:"name"},{string:"rgbValues;x: $rgbValues=((0 range 2) at _y)",kind:"string"},{kind:"dot",dot:1},{string:"imageRemoveAlpha",kind:"string"},{special:"=",kind:"special"},{string:"_x",kind:"string"},{name:"fun",kind:"name"},{string:"\n\t{{colorRemoveAlpha: x} each x} each x\n",kind:"string"},{kind:"dot",dot:1},{string:"imageSetAlpha",kind:"string"},{special:"=",kind:"special"},{kind:"parentheses",parentheses:[{string:"alphaFunction",kind:"string"},{special:";",kind:"special"},{string:"_imageData",kind:"string"}]},{name:"fun",kind:"name"},{string:"\n\t{{alphaFunction colorSetAlpha x} each  x} each _imageData\n",kind:"string"}]);GLang.packageManager.registerPrecompiledPackage(["kalzit_media_protocol_from_text"],[{string:"kalzitMediaProtocolFromText",kind:"string"},{special:"=",kind:"special"},{kind:"parentheses",parentheses:[{name:"String",kind:"name"},{name:"calcitSetType",kind:"name"},{string:"text",kind:"string"}]},{name:"fun",kind:"name"},{string:'\n\t\'{"protocolVersion":"1.0.0", "kind":"text", "text":{"raw":\' + (objToJson: text) + \'}}\'\n',kind:"string"}]);GLang.packageManager.registerPrecompiledPackage(["play","pause","mute","increase_volume","decrease_volume","volume","volume_step_size","volume_step_size_ref"],[{string:"pause",kind:"string"},{special:"=",kind:"special"},{string:"_mediaController",kind:"string"},{name:"fun",kind:"name"},{string:"do $pause of _mediaController",kind:"string"},{kind:"dot",dot:1},{string:"play",kind:"string"},{special:"=",kind:"special"},{string:"_mediaController",kind:"string"},{name:"fun",kind:"name"},{string:"do $play of _mediaController",kind:"string"},{kind:"dot",dot:1},{name:"nofreeze",kind:"name"},{kind:"name",name:"calcitSetAnnotation"},{string:"volumeStepSize",kind:"string"},{special:"=",kind:"special"},{num:.1,kind:"num"},{kind:"dot",dot:1},{string:"volumeStepSizeRef",kind:"string"},{special:"=",kind:"special"},{name:"reference",kind:"name"},{special:":",kind:"special"},{string:"volumeStepSize",kind:"string"},{kind:"dot",dot:1},{string:"volume",kind:"string"},{special:"=",kind:"special"},{string:"_volumeController",kind:"string"},{name:"fun",kind:"name"},{string:"do $getVolume of _volumeController",kind:"string"},{kind:"dot",dot:1},{string:"increaseVolume",kind:"string"},{special:"=",kind:"special"},{string:"_volumeController",kind:"string"},{name:"fun",kind:"name"},{string:"($setVolume of _volumeController): min of 1;(volume of _volumeController) + volumeStepSize",kind:"string"},{kind:"dot",dot:1},{string:"decreaseVolume",kind:"string"},{special:"=",kind:"special"},{string:"_volumeController",kind:"string"},{name:"fun",kind:"name"},{string:"($setVolume of _volumeController): max of 0;(volume of _volumeController) - volumeStepSize",kind:"string"},{kind:"dot",dot:1},{string:"mute",kind:"string"},{special:"=",kind:"special"},{string:"_volumeController",kind:"string"},{name:"fun",kind:"name"},{string:"($setVolume of _volumeController): 0",kind:"string"}]);GLang.packageManager.registerPrecompiledPackage(["replay","replay_from","media_section"],[{string:"replayFrom",kind:"string"},{special:"=",kind:"special"},{kind:"parentheses",parentheses:[{string:"_mediaController",kind:"string"},{special:";",kind:"special"},{string:"timestamp",kind:"string"}]},{name:"fun",kind:"name"},{string:"($setTime of _mediaController): timestamp. play _mediaController",kind:"string"},{kind:"dot",dot:1},{string:"replay",kind:"string"},{special:"=",kind:"special"},{string:"_mediaController",kind:"string"},{name:"fun",kind:"name"},{string:"_mediaController replayFrom 0",kind:"string"},{kind:"dot",dot:1},{string:"mediaSection",kind:"string"},{special:"=",kind:"special"},{kind:"parentheses",parentheses:[{string:"_mediaController",kind:"string"},{special:";",kind:"special"},{string:"_startAndEnd",kind:"string"}]},{name:"fun",kind:"name"},{string:"\n\t$onProgress = $onEnd = void.\n\t$onProgressRef = reference: $onProgress.\n\t$onEndRef = reference: $onEnd.\n\t$start = first of _startAndEnd.\n\t$end = second of _startAndEnd.\n\t\n\t$controller =\n\t\t[[$play];[{\n\t\t\t!if(start > do: $getProgress of _mediaController) {\n\t\t\t\t($setTime of _mediaController): start\n\t\t\t}.\n\t\t\tplay _mediaController.\n\t\t}]];\n\t\t[[$pause];[$pause of _mediaController]];\n\t\t[[$getDuration];[end - start]];\n\t\t[[$setTime];[{\n\t\t\t($setTime of _mediaController): x + start.\n\t\t}]];\n\t\t[[$setVolume];[$setVolume of _mediaController]];\n\t\t[[$getVolume];[$getVolume of _mediaController]];\n\t\t[[$setOnEnd];[$callback fun {\n\t\t\tonEndRef = callback\n\t\t}]];\n\t\t[[$setOnProgress];[$callback fun {\n\t\t\tonProgressRef = callback\n\t\t}]];\n\t\t[[$getProgress];[() fun {\n\t\t\t(do: $getProgress of _mediaController) - start\n\t\t}]].\n\t\t\n\t($setOnProgress of _mediaController): ($timestamp ; $_controller) fun {\n\t\t!if (end < timestamp) {\n\t\t\tpause _mediaController.\n\t\t\tonEnd: controller\n\t\t}.\n\t\t(timestamp - start) onProgress controller\n\t}.\n\t\n\tcontroller\n",kind:"string"}]);